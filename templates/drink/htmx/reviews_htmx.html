{%load static%}
{%load core_tags drink_tags%}
<span>   
    <div class="row m-3">
        <div class="col">
        </div>
        <div class="col-8">
            <div class="row">
                <div class="col">
                    <div class="card" style="height:130px">
                        <div class="card-body">
                            <span>{{drink.review_drink.count}} Review{%if not drink.review_drink.count == 1%}s{%endif%}</span>
                            {%if drink.review_drink.exists%}
                            <div class="taste-rating">
                                <div class="row m-0 nowrap">
                                    <div class="col-auto nowrap pt-2 pe-2 ps-0" style="font-size:8px">
                                        {% for star in 0|range_tag:drink.average_taste %}
                                        <i class="fas fa-star yellow-star"></i>
                                        {% endfor %}
                                        {% for star in drink.average_taste|range_tag:10 %}
                                        <i class="fas fa-star grey-star"></i>
                                        {% endfor %}
                                    </div>
                                    <div class="col ps-0">
                                        <span class="card-text" style="font-size:13px">Taste</span>
                                    </div>
                                </div>
                            </div>
                            <div class="aftertaste-rating">
                                <div class="row m-0 nowrap">
                                    <div class="col-auto nowrap pt-2 pe-2 ps-0" style="font-size:8px">
                                        {% for star in 0|range_tag:drink.average_aftertaste %}
                                        <i class="fas fa-star yellow-star"></i>
                                        {% endfor %}
                                        {% for star in drink.average_aftertaste|range_tag:10 %}
                                        <i class="fas fa-star grey-star"></i>
                                        {% endfor %}
                                    </div>
                                    <div class="col ps-0">
                                        <span class="card-text" style="font-size:13px">Aftertaste</span>
                                    </div>
                                </div>
                            </div>
                            {%else%}
                            <div class="center mt-2">
                                <a href="{%url 'review-drink' pk=drink.pk%}" class="nowrap">Be the first to review!</a>
                            </div>
                            {%endif%}
                            <a href="{%url 'review-drink' pk=drink.pk%}" class="nowrap">Review this drink</a>
                        </div>
                    </div>
                </div>
                <div class="col-auto pe-1">
                    <div class="card" style="height:130px">
                        <div class="card-body">
                            <h5 class="card-title">{{ drink.name }}</h5>
                            <h6 class="card-subtitle mb-2 text-muted">{{ drink.drink_brand.name }}</h6>
                            <p class="card-text mb-0" style="font-size:13px">{%if drink.caffeine_per_hundred_ml is not None%}{{ drink.caffeine_per_hundred_ml }}{%else%}?{%endif%} <span class="text-black-50" style="font-size:12px">mg/100ml</span></p>
                        </div>
                    </div>
                </div>
                <div class="col-auto ps-1">
                    <div class="card" style="height:130px">
                        <div class="center">
                            {%if drink.image%}
                            <img src="{{ drink.image.url }}" class="card-img-top" alt="{{ drink.name }}" style="padding:6px; max-width:125px; max-height:125px; width: auto; height: auto;">
                            {%else%}
                            <img src="{%static 'img/coming-soon.jpg'%}" class="card-img-top" style="padding:6px; max-width:180px; max-height:180px; width: auto; height: auto;">
                            {%endif%}
                        </div>
                    </div>
                </div>
            </div>
            <hr>
            {%for review in drink.review_drink.all%}
            <div class="row m-0 my-2">
                <div class="col p-0">
                    <div class="card p-2">
                        <div class="row">
                            <div class="col">
                                <div class="row">
                                    <div class="col">
                                        {%if review.title%}
                                        <b>{{review.title}}</b>
                                        {%else%}
                                        <b>Untitled Review</b>
                                        {%endif%}
                                        <h6 class="card-subtitle mb-2 text-muted">By {{ review.submitted_by }}</h6>
                                    </div>
                                    <div class="col-auto">
                                        <div class="taste-rating">
                                            <div class="row m-0 nowrap">
                                                <div class="col-auto nowrap pt-2 pe-2 ps-0" style="font-size:8px">
                                                    {% for star in 0|range_tag:drink.average_taste %}
                                                    <i class="fas fa-star yellow-star"></i>
                                                    {% endfor %}
                                                    {% for star in drink.average_taste|range_tag:10 %}
                                                    <i class="fas fa-star grey-star"></i>
                                                    {% endfor %}
                                                </div>
                                                <div class="col ps-0">
                                                    <span class="card-text" style="font-size:13px">Taste</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="aftertaste-rating">
                                            <div class="row m-0 nowrap">
                                                <div class="col-auto nowrap pt-2 pe-2 ps-0" style="font-size:8px">
                                                    {% for star in 0|range_tag:drink.average_aftertaste %}
                                                    <i class="fas fa-star yellow-star"></i>
                                                    {% endfor %}
                                                    {% for star in drink.average_aftertaste|range_tag:10 %}
                                                    <i class="fas fa-star grey-star"></i>
                                                    {% endfor %}
                                                </div>
                                                <div class="col ps-0">
                                                    <span class="card-text" style="font-size:13px">Aftertaste</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col">
                                        {%if review.description%}
                                        <p>{{review.description}}</p>
                                        {%endif%}
                                    </div>
                                </div>
                            </div>
                            {%if review.image%}
                            <div class="col-auto">
                                {%if review.image%}
                                <img src="{{ review.image.url }}" class="card-img-top" alt="{{ drink.name }}" style="padding:6px; max-width:80px; max-height:80px; width: auto; height: auto;">
                                {%endif%}
                            </div>
                            {%endif%}
                        </div>
            
                    </div>
                </div>
            </div>
            {%endfor%}
        </div>
        <div class="col">
        </div>
    </div>
</span>